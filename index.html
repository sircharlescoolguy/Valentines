<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine?</title>

  <style>
    :root{
      --pink:#ff4d88;
      --pink2:#ff2e74;
      --bg1:#ffd1dc;
      --bg2:#fff;
      --card: rgba(255,255,255,0.90);
      --shadow: rgba(255,77,136,0.18);
      --text:#171717;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(circle at top, var(--bg1), var(--bg2) 55%, #ffe6f0);
      color: var(--text);
      overflow:hidden;
      padding: 18px;
    }

    /* Center container */
    .wrap{
      min-height: calc(100vh - 36px);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* HEART-SHAPED CARD */
    .heartCard{
      position: relative;
      width: min(520px, 92vw);
      aspect-ratio: 1 / 1;              /* keeps heart nice on phones */
      filter: drop-shadow(0 20px 60px var(--shadow));
    }

    /* heart body */
    .heartCard::before,
    .heartCard::after{
      content:"";
      position:absolute;
      width: 50%;
      height: 80%;
      top: 10%;
      background: var(--card);
      border: 1px solid rgba(255,105,180,0.25);
      border-bottom: none;
      border-radius: 999px 999px 20px 20px;
    }
    .heartCard::before{
      left: 25%;
      transform: rotate(-45deg);
      transform-origin: 0% 100%;
    }
    .heartCard::after{
      left: 25%;
      transform: rotate(45deg);
      transform-origin: 100% 100%;
    }

    /* content layer sitting on top of heart */
    .content{
      position:absolute;
      inset: 0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: clamp(18px, 3vw, 28px);
      text-align:center;
      pointer-events: auto;
    }

    .inner{
      width: 88%;
      max-width: 420px;
    }

    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,77,136,0.12);
      border:1px solid rgba(255,77,136,0.22);
      font-size: 13px;
      margin-bottom: 10px;
    }

    h1{
      margin: 0 0 8px;
      font-size: clamp(26px, 5vw, 42px);
      letter-spacing: -0.02em;
    }
    p{
      margin: 10px 0;
      line-height: 1.55;
      font-size: clamp(16px, 2.2vw, 18px);
      opacity: 0.92;
    }

    .question{
      margin-top: 10px;
      font-size: clamp(18px, 2.6vw, 20px);
      font-weight: 900;
    }

    .btnRow{
      margin-top: 16px;
      display:flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items:center;
      justify-content:center;
    }

    button{
      border:0;
      border-radius: 999px;
      padding: 12px 16px;
      font-size: 16px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      transition: transform 140ms ease, filter 140ms ease, opacity 140ms ease, box-shadow 140ms ease;
      position: relative;
      will-change: transform;
      min-width: 140px;
      font-weight: 900;
    }
    button:active{ transform: scale(0.98); }

    #yesBtn{
      background: var(--pink);
      color:white;
      box-shadow: 0 10px 24px rgba(255,77,136,0.28);
    }

    /* NO button will detach and become fixed on the viewport */
    #noBtn{
      background:#fff;
      color: var(--pink2);
      border:1px solid rgba(255,46,116,0.25);
    }

    #msgBox{
      margin-top: 14px;
      font-weight: 800;
      opacity: 0.95;
      min-height: 26px;
    }

    /* YES ‚Äúaggressive‚Äù wiggle */
    .wiggle{ animation: wiggle 260ms ease-in-out; }
    @keyframes wiggle{
      0%{ transform: scale(var(--ys)) rotate(0deg); }
      30%{ transform: scale(var(--ys)) rotate(-2deg); }
      60%{ transform: scale(var(--ys)) rotate(2deg); }
      100%{ transform: scale(var(--ys)) rotate(0deg); }
    }

    /* NO explode animation */
    .boom{ animation: boom 420ms ease-out forwards; }
    @keyframes boom{
      35%{ transform: translate(0,0) scale(1.2) rotate(8deg); opacity: 1; }
      100%{ transform: translate(0,0) scale(3.2) rotate(18deg); opacity: 0; filter: blur(2px); }
    }

    /* Celebration overlay */
    #celebrate{
      position: fixed;
      inset: 0;
      pointer-events:none;
      z-index: 50;
      display:none;
    }
    #celebrate.show{ display:block; }

    .spark{
      position: absolute;
      width: 8px; height: 8px;
      border-radius: 999px;
      opacity: 0.95;
      transform: translate(-50%, -50%);
      animation: fly 900ms ease-out forwards;
      will-change: transform, opacity;
      filter: saturate(1.2);
    }
    @keyframes fly{
      to{
        transform: translate(var(--dx), var(--dy)) scale(0.2);
        opacity: 0;
      }
    }

    .heart{
      position:absolute;
      transform: translate(-50%, -50%);
      font-size: 18px;
      animation: float 1100ms ease-out forwards;
      opacity: 0.95;
      will-change: transform, opacity;
      text-shadow: 0 8px 18px rgba(255,77,136,0.25);
    }
    @keyframes float{
      to{
        transform: translate(calc(var(--dx)), calc(var(--dy))) scale(0.9);
        opacity: 0;
      }
    }

    /* Mobile: make buttons full width inside heart */
    @media (max-width: 420px){
      button{ width: 100%; min-width: 0; }
      .inner{ width: 92%; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="heartCard" id="heartCard">
      <div class="content">
        <div class="inner">
          <div class="badge">üíå</div>
          <h1>HALLO, Masha üíó</h1>
          <p>Quick question:</p>
          <div class="question">Will you be my Valentine?</div>

          <div class="btnRow" id="btnRow">
            <button id="yesBtn" type="button">Yes</button>
            <button id="noBtn" type="button">No</button>
          </div>

          <div id="msgBox"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="celebrate"></div>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const msgBox = document.getElementById("msgBox");
    const celebrate = document.getElementById("celebrate");

    let noClicks = 0;
    let yesScale = 1.0;
    let noDetached = false;

    const noLines = [
      "wow‚Ä¶ no again?",
      "GAY",
      "Translating... GLORY TO ISRAEL",
      "this is starting to get hurtful‚Ä¶.",
      "I see how it is...",
      "You're just hurting the button's feelings at this point",
      "JUST CLICK YES ALREADY",
      "i‚Äôm watching you pick no on purpose",
      ":(",
      "alright. i'll remember that!"
    ];

    // YES click: celebrate and lock
    yesBtn.addEventListener("click", () => {
      yesScale = Math.min(yesScale + 0.25, 2.8);
      applyYesEnergy(true);

      msgBox.textContent = "üéâ";
      launchCelebration();

      yesBtn.disabled = true;
      noBtn.disabled = true;
      yesBtn.style.cursor = "default";
      noBtn.style.cursor = "default";
    });

    // NO click: now moves anywhere on SCREEN, never off-screen, shrinks each click, explodes at 10
    noBtn.addEventListener("click", () => {
      noClicks++;

      if (!noDetached){
        detachNoToViewport();
        noDetached = true;
      }

      const noScale = Math.max(0.35, 1 - noClicks * 0.05); // 10 clicks -> ~0.5
      noBtn.style.transform = `scale(${noScale})`;

      msgBox.textContent = noLines[Math.min(noClicks - 1, noLines.length - 1)];

      // YES gets bigger + more intense every NO click
      yesScale = Math.min(yesScale + 0.14, 2.6);
      applyYesEnergy();

      // Move NO somewhere visible on the viewport
      moveNoOnScreen();

      if (noClicks >= 10){
        explodeNo();
      }
    });

    function applyYesEnergy(extra=false){
      yesBtn.style.setProperty("--ys", yesScale.toFixed(2));
      yesBtn.style.transform = `scale(${yesScale})`;

      const glow = 0.22 + (yesScale - 1) * 0.30;
      yesBtn.style.boxShadow =
        `0 10px 24px rgba(255,77,136,0.28), 0 0 30px rgba(255,77,136,${Math.min(glow,0.9)})`;

      yesBtn.classList.remove("wiggle");
      void yesBtn.offsetWidth;
      yesBtn.classList.add("wiggle");

      if (!extra){
        if (yesScale < 1.35) yesBtn.textContent = "Yes";
        else if (yesScale < 1.75) yesBtn.textContent = "YES";
        else if (yesScale < 2.1) yesBtn.textContent = "YES ‚úÖ";
        else yesBtn.textContent = "YES NOW ‚úÖ";
      } else {
        yesBtn.textContent = "YES ‚úÖ";
      }
    }

    function detachNoToViewport(){
      // Convert NO into a viewport-floating button
      const rect = noBtn.getBoundingClientRect();

      noBtn.style.position = "fixed";
      noBtn.style.left = rect.left + "px";
      noBtn.style.top  = rect.top + "px";
      noBtn.style.zIndex = "40";         // above heart
    }

    function moveNoOnScreen(){
      const pad = 12; // safe padding from edges

      // Force layout read after scaling so width/height are accurate
      const rect = noBtn.getBoundingClientRect();
      const bw = rect.width;
      const bh = rect.height;

      const vw = window.innerWidth;
      const vh = window.innerHeight;

      // Choose a random visible spot
      const minX = pad;
      const maxX = Math.max(pad, vw - bw - pad);
      const minY = pad;
      const maxY = Math.max(pad, vh - bh - pad);

      const x = minX + Math.random() * (maxX - minX);
      const y = minY + Math.random() * (maxY - minY);

      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    }

    function explodeNo(){
      const rect = noBtn.getBoundingClientRect();
      const cx = rect.left + rect.width/2;
      const cy = rect.top + rect.height/2;

      noBtn.classList.add("boom");
      burst(cx, cy, 34);

      setTimeout(() => {
        noBtn.style.display = "none";
      }, 430);
    }

    // Celebration fireworks
    function launchCelebration(){
      celebrate.classList.add("show");

      const bursts = 9;
      let i = 0;

      const interval = setInterval(() => {
        i++;
        const x = window.innerWidth  * (0.15 + Math.random()*0.7);
        const y = window.innerHeight * (0.20 + Math.random()*0.5);
        burst(x, y, 38);

        if (i >= bursts){
          clearInterval(interval);
          setTimeout(() => {
            celebrate.classList.remove("show");
            celebrate.innerHTML = "";
          }, 950);
        }
      }, 140);
    }

    function burst(x, y, count){
      const emojis = ["üíó","üíñ","üíò","üíù","üíï","‚ù§Ô∏è"];
      const sparkColors = ["#ff4d88","#ff2e74","#ff6fb0","#ff9ac8","#ffd1dc","#ffffff"];

      for (let i=0; i<count; i++){
        const s = document.createElement("div");
        s.className = "spark";
        s.style.left = x + "px";
        s.style.top  = y + "px";

        const angle = Math.random()*Math.PI*2;
        const dist  = 60 + Math.random()*180;
        const dx = Math.cos(angle)*dist;
        const dy = Math.sin(angle)*dist;

        s.style.setProperty("--dx", dx + "px");
        s.style.setProperty("--dy", dy + "px");
        s.style.background = sparkColors[(Math.random()*sparkColors.length)|0];

        celebrate.appendChild(s);
        setTimeout(() => s.remove(), 950);

        if (Math.random() < 0.40){
          const h = document.createElement("div");
          h.className = "heart";
          h.textContent = emojis[(Math.random()*emojis.length)|0];
          h.style.left = x + "px";
          h.style.top  = y + "px";

          const hdx = (Math.random()*2-1) * (40 + Math.random()*140);
          const hdy = -(40 + Math.random()*180);

          h.style.setProperty("--dx", hdx + "px");
          h.style.setProperty("--dy", hdy + "px");

          celebrate.appendChild(h);
          setTimeout(() => h.remove(), 1200);
        }
      }
    }

    // If screen rotates/resizes, keep NO button visible
    window.addEventListener("resize", () => {
      if (noDetached && noBtn.style.display !== "none") moveNoOnScreen();
    });
  </script>
</body>
</html>
