<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine?</title>

  <style>
    :root{
      --pink:#ff4d88;
      --pink2:#ff2e74;
      --bg1:#ffd1dc;
      --bg2:#fff;
      --shadow: rgba(255,77,136,0.22);
      --text:#171717;
      --cardBorder: rgba(255,105,180,0.28);
      --cardFill: rgba(255,255,255,0.92);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(circle at top, var(--bg1), var(--bg2) 55%, #ffe6f0);
      color: var(--text);
      overflow:hidden;
      padding: 18px;
    }

    .wrap{
      min-height: calc(100vh - 36px);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Bigger heart area so things fit */
    .heartStage{
      width: min(920px, 98vw);
      aspect-ratio: 1.55 / 1;
      position: relative;
      filter: drop-shadow(0 24px 70px var(--shadow));
      user-select:none;
    }

    .heartSvg{
      width: 100%;
      height: 100%;
      display:block;
    }

    /* Content sits on top */
    .content{
      position:absolute;
      inset: 0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding: clamp(14px, 2.6vw, 30px);
      pointer-events: auto;
    }

    .inner{
      width: min(540px, 92%);
    }

    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,77,136,0.12);
      border:1px solid rgba(255,77,136,0.22);
      font-size: 13px;
      margin-bottom: 10px;
    }

    h1{
      margin: 0 0 8px;
      font-size: clamp(26px, 4.8vw, 48px);
      letter-spacing: -0.02em;
    }

    p{
      margin: 10px 0;
      line-height: 1.55;
      font-size: clamp(16px, 2.2vw, 18px);
      opacity: 0.92;
    }

    .question{
      margin-top: 10px;
      font-size: clamp(18px, 2.6vw, 20px);
      font-weight: 900;
    }

    .btnRow{
      margin-top: 16px;
      display:flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items:center;
      justify-content:center;
    }

    button{
      border:0;
      border-radius: 999px;
      padding: 12px 18px;
      font-size: 16px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      transition: transform 140ms ease, filter 140ms ease, opacity 140ms ease, box-shadow 140ms ease, border-color 140ms ease;
      position: relative;
      will-change: transform;
      min-width: 160px;
      font-weight: 900;
    }
    button:active{ transform: scale(0.98); }

    #yesBtn{
      background: var(--pink);
      color:white;
      box-shadow: 0 10px 24px rgba(255,77,136,0.28);
    }

    #noBtn{
      background:#fff;
      color: var(--pink2);
      border: 2px solid rgba(255,46,116,0.28);
      box-shadow: 0 8px 18px rgba(255,46,116,0.10);
    }

    #msgBox{
      margin-top: 14px;
      font-weight: 800;
      opacity: 0.95;
      min-height: 26px;
    }

    /* YES ‚Äúaggressive‚Äù wiggle */
    .wiggle{ animation: wiggle 260ms ease-in-out; }
    @keyframes wiggle{
      0%{ transform: scale(var(--ys)) rotate(0deg); }
      30%{ transform: scale(var(--ys)) rotate(-2deg); }
      60%{ transform: scale(var(--ys)) rotate(2deg); }
      100%{ transform: scale(var(--ys)) rotate(0deg); }
    }

    /* NO explode animation */
    .boom{ animation: boom 420ms ease-out forwards; }
    @keyframes boom{
      35%{ transform: scale(1.2) rotate(8deg); opacity: 1; }
      100%{ transform: scale(3.2) rotate(18deg); opacity: 0; filter: blur(2px); }
    }

    /* Celebration overlay */
    #celebrate{
      position: fixed;
      inset: 0;
      pointer-events:none;
      z-index: 50;
      display:none;
    }
    #celebrate.show{ display:block; }

    .spark{
      position: absolute;
      width: 8px; height: 8px;
      border-radius: 999px;
      opacity: 0.95;
      transform: translate(-50%, -50%);
      animation: fly 900ms ease-out forwards;
      will-change: transform, opacity;
      filter: saturate(1.2);
    }
    @keyframes fly{
      to{
        transform: translate(var(--dx), var(--dy)) scale(0.2);
        opacity: 0;
      }
    }

    .heartP{
      position:absolute;
      transform: translate(-50%, -50%);
      font-size: 18px;
      animation: float 1100ms ease-out forwards;
      opacity: 0.95;
      will-change: transform, opacity;
      text-shadow: 0 8px 18px rgba(255,77,136,0.25);
    }
    @keyframes float{
      to{
        transform: translate(calc(var(--dx)), calc(var(--dy))) scale(0.9);
        opacity: 0;
      }
    }

    @media (max-width: 520px){
      button{ width: 100%; min-width: 0; }
      .heartStage{ width: min(980px, 99vw); }
      .inner{ width: min(520px, 96%); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="heartStage" id="heartStage">
      <!-- Real heart shape (SVG) -->
      <svg class="heartSvg" viewBox="0 0 900 650" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
        <path
          d="M450 625
             C 105 445, 25 270, 135 145
             C 230 35, 365 70, 450 195
             C 535 70, 670 35, 765 145
             C 875 270, 795 445, 450 625 Z"
          fill="var(--cardFill)"
          stroke="var(--cardBorder)"
          stroke-width="4"
        />
      </svg>

      <div class="content">
        <div class="inner">
          <div class="badge">üíå</div>
          <h1>HALLO, Masha üíó</h1>
          <p>Quick question:</p>
          <div class="question">Will you be my Valentine?</div>

          <div class="btnRow">
            <button id="yesBtn" type="button">Yes</button>
            <button id="noBtn" type="button">No</button>
          </div>

          <div id="msgBox"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="celebrate"></div>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const msgBox = document.getElementById("msgBox");
    const celebrate = document.getElementById("celebrate");

    let noClicks = 0;
    let yesScale = 1.0;
    let noDetached = false;

    // Your strings (one line adjusted for safety)
    const noLines = [
      "wow‚Ä¶ no again?",
      "GAYYYY", 
      "Translating... GLORY TO ISRAEL",
      "this is starting to get hurtful‚Ä¶.",
      "I see how it is...",
      "You're just hurting the button's feelings at this point",
      "JUST CLICK YES ALREADY",
      "i‚Äôm watching you pick no on purpose",
      ":(",
      "alright. i'll remember that!"
    ];

    yesBtn.addEventListener("click", () => {
      // big final grow + celebration
      yesScale = Math.min(yesScale + 0.25, 2.8);
      applyYesEnergy(true);

      msgBox.textContent = "üéâ";
      launchCelebrationLong();

      yesBtn.disabled = true;
      noBtn.disabled = true;
      yesBtn.style.cursor = "default";
      noBtn.style.cursor = "default";
    });

    noBtn.addEventListener("click", () => {
      noClicks++;

      if (!noDetached){
        detachNoToViewport();
        noDetached = true;
      }

      // NO gets smaller each click
      const noScale = Math.max(0.35, 1 - noClicks * 0.05);
      noBtn.style.transform = `scale(${noScale})`;

      // Funny text per click
      msgBox.textContent = noLines[Math.min(noClicks - 1, noLines.length - 1)];

      // YES grows and gets more intense each NO click
      yesScale = Math.min(yesScale + 0.14, 2.6);
      applyYesEnergy(false);

      // Move NO within a smaller middle range (especially on phones)
      moveNoInMiddleZone();

      // Explode on click 10
      if (noClicks >= 10){
        explodeNo();
      }
    });

    function applyYesEnergy(finalClick){
      yesBtn.style.setProperty("--ys", yesScale.toFixed(2));
      yesBtn.style.transform = `scale(${yesScale})`;

      const glow = 0.22 + (yesScale - 1) * 0.30;
      yesBtn.style.boxShadow =
        `0 10px 24px rgba(255,77,136,0.28), 0 0 30px rgba(255,77,136,${Math.min(glow,0.9)})`;

      yesBtn.classList.remove("wiggle");
      void yesBtn.offsetWidth;
      yesBtn.classList.add("wiggle");

      if (!finalClick){
        if (yesScale < 1.35) yesBtn.textContent = "Yes";
        else if (yesScale < 1.75) yesBtn.textContent = "YES";
        else if (yesScale < 2.1) yesBtn.textContent = "YES ‚úÖ";
        else yesBtn.textContent = "YES NOW ‚úÖ";
      } else {
        yesBtn.textContent = "YES ‚úÖ";
      }
    }

    function detachNoToViewport(){
      const rect = noBtn.getBoundingClientRect();
      noBtn.style.position = "fixed";
      noBtn.style.left = rect.left + "px";
      noBtn.style.top  = rect.top + "px";
      noBtn.style.zIndex = "40";
    }

    // Smaller ‚Äúmiddle zone‚Äù so it doesn‚Äôt run away on phones
    function moveNoInMiddleZone(){
      const pad = 10;

      // After scaling, read current size
      const rect = noBtn.getBoundingClientRect();
      const bw = rect.width;
      const bh = rect.height;

      const vw = window.innerWidth;
      const vh = window.innerHeight;

      const isPhone = vw <= 520;

      // Smaller jump region:
      // phones: ~38% of screen, desktop: ~50% of screen
      const zoneW = vw * (isPhone ? 0.38 : 0.50);
      const zoneH = vh * (isPhone ? 0.38 : 0.50);

      const zoneLeft = (vw - zoneW) / 2;
      const zoneTop  = (vh - zoneH) / 2;

      const minX = zoneLeft + pad;
      const maxX = Math.max(minX, zoneLeft + zoneW - bw - pad);

      const minY = zoneTop + pad;
      const maxY = Math.max(minY, zoneTop + zoneH - bh - pad);

      const x = minX + Math.random() * (maxX - minX);
      const y = minY + Math.random() * (maxY - minY);

      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    }

    function explodeNo(){
      const rect = noBtn.getBoundingClientRect();
      const cx = rect.left + rect.width/2;
      const cy = rect.top + rect.height/2;

      noBtn.classList.add("boom");
      burst(cx, cy, 34);

      setTimeout(() => {
        noBtn.style.display = "none";
      }, 430);
    }

    // Longer, more continuous ‚Äúfireworks‚Äù
    function launchCelebrationLong(){
      celebrate.classList.add("show");

      const start = Date.now();
      const DURATION_MS = 9000; // ~9 seconds
      const INTERVAL_MS = 120;  // frequent bursts

      const interval = setInterval(() => {
        const elapsed = Date.now() - start;

        // 1‚Äì2 bursts per tick keeps it ‚Äúcontinuous‚Äù
        const burstsThisTick = (Math.random() < 0.55) ? 1 : 2;
        for (let b = 0; b < burstsThisTick; b++){
          const x = window.innerWidth  * (0.18 + Math.random()*0.64);
          const y = window.innerHeight * (0.18 + Math.random()*0.56);
          burst(x, y, 26); // smaller per burst so phones don‚Äôt lag
        }

        if (elapsed >= DURATION_MS){
          clearInterval(interval);
          setTimeout(() => {
            celebrate.classList.remove("show");
            celebrate.innerHTML = "";
          }, 1200);
        }
      }, INTERVAL_MS);
    }

    function burst(x, y, count){
      const emojis = ["üíó","üíñ","üíò","üíù","üíï","‚ù§Ô∏è"];
      const sparkColors = ["#ff4d88","#ff2e74","#ff6fb0","#ff9ac8","#ffd1dc","#ffffff"];

      for (let i=0; i<count; i++){
        const s = document.createElement("div");
        s.className = "spark";
        s.style.left = x + "px";
        s.style.top  = y + "px";

        const angle = Math.random()*Math.PI*2;
        const dist  = 60 + Math.random()*180;
        const dx = Math.cos(angle)*dist;
        const dy = Math.sin(angle)*dist;

        s.style.setProperty("--dx", dx + "px");
        s.style.setProperty("--dy", dy + "px");
        s.style.background = sparkColors[(Math.random()*sparkColors.length)|0];

        celebrate.appendChild(s);
        setTimeout(() => s.remove(), 950);

        if (Math.random() < 0.40){
          const h = document.createElement("div");
          h.className = "heartP";
          h.textContent = emojis[(Math.random()*emojis.length)|0];
          h.style.left = x + "px";
          h.style.top  = y + "px";

          const hdx = (Math.random()*2-1) * (40 + Math.random()*140);
          const hdy = -(40 + Math.random()*180);

          h.style.setProperty("--dx", hdx + "px");
          h.style.setProperty("--dy", hdy + "px");

          celebrate.appendChild(h);
          setTimeout(() => h.remove(), 1200);
        }
      }
    }

    window.addEventListener("resize", () => {
      if (noDetached && noBtn.style.display !== "none") moveNoInMiddleZone();
    });
  </script>
</body>
</html>
